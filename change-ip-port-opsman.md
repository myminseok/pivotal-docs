## Set IP/PORT on opsman VM manually 

reference: https://community.pivotal.io/s/article/Pivotal-Cloud-Foundry-Being-Associated-with-Internal-IP-Rather-than-FQDN?language=en_US


In ops manager VM as root, 

interfaces
```
root@opsmanager-2-8:/etc/network# vi interfaces
# This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

# The loopback network interface
auto lo
iface lo inet loopback

# The primary network interface
auto eth0

# Generated by ./set_static_ip
iface eth0 inet static
address 10.10.10.12
netmask 255.255.0.0
gateway 10.10.10.1
dns-nameservers 10.10.10.5

```
3) reboot


## Change opsman domain url or port
#### nginx 
In ops manager VM as root, 
```
vi /etc/nginx/nginx.conf 

  # Proxy non-static traffic to thin
  server {
    #listen 443;
     listen 7443;

   location = /uaa {
      proxy_redirect off;
      proxy_pass http://tomcat_server;
      add_header Cache-Control "no-cache, no-store";

    }

location /uaa/ { 
# proxy_redirect off; 
proxy_pass http://tomcat_server; 
proxy_redirect https://pcfdemo.net/ https://pcfdemo.net:7443/; 

 location /uaa/vendor {
        proxy_redirect off;
        proxy_pass http://tomcat_server;
        add_header Cache-Control "no-cache, no-store";
      }
```

#### uaa db  
In ops manager VM as root
```
sudo su 
su - postgres 
postgres@pivotal-ops-manager:/home/ubuntu$ psql tempest_production
psql (9.3.12)
Type "help" for help.

tempest_production=# \d+ uaa_configs
tempest_production=# update uaa_configs set hostname='pcfdemo.net';
UPDATE 1
tempest_production=# update uaa_configs set port=7443;
```
#### restart tempest-web
```
service nginx restart
service tempest-web stop 
service tempest-web start 
```





